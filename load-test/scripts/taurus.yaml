cli-aliases:
  scenario1:
    execution:
      - concurrency: 1
        ramp-up: 10s
        hold-for: 60s
        executor: jmeter
        scenario: test1
  scenario2:
    execution:
      - concurrency: 1
        ramp-up: 10s
        hold-for: 60s
        executor: gatling
        scenario: test2

scenarios:
  test1:
    script: jmeter/google.jmx
  test2:
    script: gatling/sample.scala
    simulation: tests.gatling.BasicSimulation

reporting:
  - module: final-stats
    summary: true
    percentiles: true
    summary-labels: false
    test-duration: true
    dump-xml: /tmp/artifacts/results.xml
  - module: passfail
    criteria:
      response time: p90 > 0.05s for 10s, continue as failed
      error rate: failures < 50% for 60s, continue as failed
  - module: junit-xml
    filename: /tmp/artifacts/pass-fail.xml
    data-source: pass-fail

settings:
  ramp-up-exclude: true
  env:
    CLUSTER_SIZE: 1
    PARTITION_ID: 1

modules:
  console:
    disable: true
  jmeter:
    version: auto
    force-ctg: true
    detect-plugins: true
    properties:
      log_level.JMeter: WARN
      log_level.JMeter.threads: WARN
    system-properties:
      org.apache.commons.logging.simplelog.log.org.apache.http: WARN
  consolidator:
    generalize-labels: 500 # support up to this number of labels
    max-error-variety: 100 # max count of different error messages accepted (default: 100)
    percentiles:
      - 0.0
      - 50.0
      - 90.0
      - 100.0
